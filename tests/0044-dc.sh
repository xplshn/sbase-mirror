#!/bin/sh

set -e

tmp=$$.tmp

trap 'rm -f $tmp' EXIT
trap 'exit $?' HUP INT TERM

# Expected output for line wrapping tests (derived from system dc)
cat <<'EOF' >$tmp
test 1:
327339060789614187001318969682759915221664204604306478948329136809613\
379640467455488327009232590415715088668412756007100921725654588539305\
3328527589376
test 2:
-32733906078961418700131896968275991522166420460430647894832913680961\
337964046745548832700923259041571508866841275600710092172565458853930\
53328527589376
test 3:
.33333333333333333333333333333333333333333333333333333333333333333333\
33333333333333333333333333333333
test 4:
123456789012345678901234567890123456789012345678901234567890123456789
test 5:
123456789012345678901234567890123456789012345678901234567890123456789\
0
EOF

$EXEC ../dc <<'EOF' | diff -u $tmp -
[test 1:]pc 2 500^ p
[test 2:]pc 0 2 500^ - p
[test 3:]pc 100k 1 3 / p
[test 4:]pc 123456789012345678901234567890123456789012345678901234567890123456789 p
[test 5:]pc 1234567890123456789012345678901234567890123456789012345678901234567890 p
EOF
